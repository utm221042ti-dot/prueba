<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro/login</title>
    <link rel="manifest" href="manifest.webmanifest">
</head>
<style>
    /*desde aqui es el estilo para formulario de registro*/
.container {
    background-color: #fff; 
    border-radius: 30px; 
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.35); /* Añade una sombra sutil al contenedor */
    position: relative; /* Define la posición relativa para posicionamiento absoluto dentro de este contenedor */
    overflow: hidden; 
    width: 768px; 
    max-width: 100%; 
    min-height: 480px; 
}

/* Estilos para los párrafos dentro del contenedor */
.container p {
    font-size: 14px; 
    line-height: 20px; 
    letter-spacing: 0.3px; /* Añade un poco de espacio entre las letras */
    margin: 20px 0; 
}

/* Estilos para los elementos span dentro del contenedor */
.container span {
    font-size: 12px; 
}

/* Estilos para los botones dentro del contenedor */
.container button {
    background-color: #f4a95e; /* Establece un fondo oscuro para los botones */
    color: #fff; /* Establece el color del texto a blanco */
    font-size: 12px; 
    padding: 10px 45px; 
    border: 1px solid transparent;
    border-radius: 8px; 
    font-weight: 600; 
    letter-spacing: 0.5px;
    text-transform: uppercase; 
    margin-top: 10px; 
    cursor: pointer; 
}

/* Estilos para el botón con la clase 'hidden' */
.container button.hidden {
    background-color: transparent; 
    border-color: #fff; 
}

/* Estilos para el formulario dentro del contenedor */
.container form {
    background-color: #fff; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    flex-direction: column;
    padding: 0 40px; 
    height: 100%; 
}

/* Estilos para los campos de entrada dentro del contenedor */
.container input {
    background-color: #eee; 
    border: none;
    margin: 8px 0; 
    padding: 10px 15px; 
    font-size: 13px; 
    border-radius: 8px; 
    width: 100%; 
    outline: none; 
}

/* Contenedor que alberga los formularios de inicio de sesión y registro */
.form-container {
    position: absolute; 
    top: 0; 
    height: 100%;
    transition: all 0.6s ease-in-out;
}

/* Estilos para el formulario de inicio de sesión */
.sign-in {
    left: 0; 
    width: 50%; 
    z-index: 2; /* Establece un valor de z-index para posicionar el formulario encima del formulario de registro */
}

/* Cuando la clase 'active' se aplica al contenedor, el formulario de inicio de sesión se mueve hacia la derecha */
.container.active .sign-in {
    transform: translateX(100%); /* Desplaza el formulario de inicio de sesión fuera del contenedor */
}

/* Estilos para el formulario de registro */
.sign-up {
    left: 0; 
    width: 50%; 
    opacity: 0; 
    z-index: 1; /* Establece un valor de z-index para que esté detrás del formulario de inicio de sesión */
}

/* Cuando la clase 'active' se aplica al contenedor, el formulario de registro se mueve y se hace visible */
.container.active .sign-up {
    transform: translateX(100%); 
    opacity: 1;
    z-index: 5; /* Establece el formulario de registro por encima del formulario de inicio de sesión */
    animation: move 0.6s; /* Aplica una animación para mover el formulario */
}

/* Animación para mover el formulario de registro */
@keyframes move {
    0%, 49.99% {
        opacity: 0; /* Hace el formulario invisible al principio de la animación */
        z-index: 1; /* Coloca el formulario detrás */
    }
    50%, 100% {
        opacity: 1; /* Hace el formulario visible al final de la animación */
        z-index: 5; /* Coloca el formulario por encima */
    }
}

/* Estilos para el contenedor del toggle (cambio entre formularios) */
.toggle-container {
    position: absolute; 
    top: 0; 
    left: 50%; 
    width: 50%; 
    height: 100%; 
    overflow: hidden; 
    transition: all 0.6s ease-in-out; 
    z-index: 1000; /* Coloca el contenedor por encima de otros elementos */
    
}

/* Cuando la clase 'active' se aplica al contenedor, el toggle se desplaza hacia la izquierda */
.container.active .toggle-container {
    transform: translateX(-100%); /* Desplaza el toggle hacia la izquierda */
}

/* Estilos para el contenedor de toggle */
.toggle {
    background-color: #e4ba9e; 
    height: 100%; 
    color: #fff; 
    position: relative; 
    left: -100%; 
    width: 200%; 
    transform: translateX(0); 
    transition: all 0.6s ease-in-out; 
}

/* Cuando la clase 'active' se aplica al contenedor, el toggle se desplaza hacia la derecha */
.container.active .toggle {
    transform: translateX(50%); /* Mueve el toggle hacia la derecha */
}

/* Estilos para cada panel dentro del toggle */
.toggle-panel {
    position: absolute;
    width: 50%; 
    height: 100%; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    flex-direction: column; 
    padding: 0 30px; 
    text-align: center; 
    top: 0;
    transform: translateX(0); 
    transition: all 0.6s ease-in-out; 
    background-color: #e4ba9e; /* Fondo oscuro */
}

/* Panel izquierdo del toggle */
.toggle-left {
    transform: translateX(-200%); /* Inicialmente coloca el panel izquierdo fuera de vista */
}

/* Cuando la clase 'active' se aplica al contenedor, el panel izquierdo se mueve a su posición */
.container.active .toggle-left {
    transform: translateX(0); /* Mueve el panel izquierdo a su posición */
}

/* Panel derecho del toggle */
.toggle-right {
    right: 0; /* Coloca el panel derecho a la derecha */
    transform: translateX(0); /* Inicialmente no hay desplazamiento */
}

/* Cuando la clase 'active' se aplica al contenedor, el panel derecho se mueve hacia fuera de vista */
.container.active .toggle-right {
    transform: translateX(200%); /* Desplaza el panel derecho fuera de vista */
}
</style>
<body style="background-color: aliceblue; display: flex; align-items: center; justify-content: center;flex-direction: column; height: 100vh;">
    <div class="container" id="container">
        <div class="form-container sign-up">
            <form>
                <h1>Crear cuenta</h1>

                <span>Usa tu correo para registrarte</span>

                <input type="text" id="registerName" placeholder="Nombre" required>
                <input type="email" id="registerEmail" placeholder="Ej. ejemplo@gmail.com" required>
                <input type="password" id="registerPassword" placeholder="Contraseña" required>
                <button id="registerButton">Registrarse</button>
            </form>
        </div>

        <div class="form-container sign-in">
            <form>
                <h1>Iniciar sesión</h1>

                <span>Usa tu correo y contraseña</span>

                <input type="email" id="loginEmail" placeholder="Ej. ejemplo@gmail.com">
                <input type="password" id="loginPassword" placeholder="Contraseña">
                <button id="loginButton">Iniciar sesión</button>
            </form>
        </div>

        <div class="toggle-container">
            <div class="toggle">
                <div class="toggle-panel toggle-left">
                <h1>Hola!</h1>
                <p>Registra tu cuenta</p>
                <button class="hidden" id="login">Iniciar sesión</button>
                </div>


                <div class="toggle-panel toggle-right">
                    <h1>Bienvenido</h1>
                    <p>Usa tu correo y contraseña</p>
                    <button class="hidden" id="register">Registrarse</button>
                </div>
            </div>
        </div>
    </div>

   
    <script>

        //funcionalidad del toggle
        const container = document.getElementById('container');

        const registerBtn = document.getElementById('register');
        const loginBtn = document.getElementById('login');

        registerBtn.addEventListener('click', () => {
            container.classList.add("active")
        });

        loginBtn.addEventListener('click', () => {
            container.classList.remove("active")
        });


    (() => {
    const loginBtn = document.getElementById("loginButton");
    const registerBtn = document.getElementById("registerButton");

    // Registro de usuario
    if (registerBtn) {
        registerBtn.addEventListener("click", async (e) => {
            e.preventDefault();

            const name = document.getElementById("registerName").value.trim();
            const email = document.getElementById("registerEmail").value.trim();
            const password = document.getElementById("registerPassword").value.trim();

            if (!name && !email && !password) {
                alert("Por favor, completa todos los campos.");
                return;
            }

            try {
                
                const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;

             
                await user.updateProfile({ displayName: name });

               
                await db.collection("usuarios").doc(user.uid).set({
                    nombre: name,
                    correo: email,
                    uid: user.uid,
                    creadoEn: firebase.firestore.FieldValue.serverTimestamp()
                });

                alert(" Registro exitoso. Bienvenido/a, " + name);
                window.location.href = "index.html";
            } catch (error) {
                alert(" Error: " + error.message);
            }
        });
    }

    // Inicio de sesión
    if (loginBtn) {
        loginBtn.addEventListener("click", async (e) => {
            e.preventDefault();

            const email = document.getElementById("loginEmail").value.trim();
            const password = document.getElementById("loginPassword").value.trim();

            if (!email || !password) {
                alert("Completa todos los campos.");
                return;
            }

            try {
                await firebase.auth().signInWithEmailAndPassword(email, password);
                alert("Inicio de sesión exitoso");
                window.location.href = "index.html";
            } catch (error) {
                alert("Error: " + error.message);
            }
        });
    }
})();

    </script>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBAfCWNZ0UuXdYtToCEeEt_eDH5QY_Z83Y",
      authDomain: "mi-primer-proyecto-b175f.firebaseapp.com",
      projectId: "mi-primer-proyecto-b175f",
      storageBucket: "mi-primer-proyecto-b175f.firebasestorage.appspot.com",
      messagingSenderId: "569020481723",
      appId: "1:569020481723:web:5ef634bfb6b9ee6aefe99e",
      measurementId: "G-9P6ZL4D5RW"
   };
   firebase.initializeApp(firebaseConfig);
   const db = firebase.firestore();

</script>

</body>
</html>